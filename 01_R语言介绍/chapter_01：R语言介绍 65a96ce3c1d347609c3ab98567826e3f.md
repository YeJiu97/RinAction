# chapter_01：R语言介绍

## 1.1 数据分析步骤

数据分析的步骤：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled.png)

## 1.2 安装和使用R语言

安装R语言：[https://www.r-project.org/](https://www.r-project.org/)

R语言是大小写敏感的解释型语言，并且R语言使用的是：

```r
<-
```

来进行赋值，比如说：

```r
num_1 <- 12
```

这就相当于将12这个数字赋值给了num_1这个变量。

R语言现在也提供了如下所示的几种赋值方法：

```r
num_1 = 12
12 -> num_1
```

这三者是等效的，但是处于使用习惯的考量，我们将会延续第一种赋值方法。

R语言提供的多数功能有三个来源：

1. R语言自带的函数
2. 用户自编函数
3. 对对象的创建和操作所提供的

一个对象是任何能够被赋值的东西，可以是数据，函数，图形或者分析结果等等。每一个对象都有一个类属性，类属性可以告诉R如何对对象进行处理。

我们可以尝试一下rnorm函数：

```r
x <- rnorm(5)
```

运行打印x：

```r
x
```

得到的结果为：

```r
[1]  0.19606239 -0.05650363  1.88591132  1.57838343  0.50228462
```

在这里我们创建了一个名为x的向量对象，这个对象包含了5个来自标准正态分布的随机偏差。

## 1.3 一个例子

假设我们收集到了10个婴儿在出生之后一年之内的月龄和体重数据，如下所示：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled%201.png)

我们可以使用函数c()来以向量的形式输入月龄和体重数据，此函数可以将其参数组合成一个向量或者列表。

接着我们可以使用mean()，sd()和cor()函数来分别获得体重的均值和标准差，以及月龄和体重的相关度，最后使用plot()函数来以图形的方式展示月龄和体重的关系。

首先我们来创建两个向量用来表述月龄和体重：

```r
age <- c(1, 3, 5, 2, 11, 9, 3, 9, 12, 3)  # 使用c()来创建向量，将月龄的值赋值进去
weight <- c(4.4, 5.3, 7.2, 5.2, 8.5, 7.3, 6.0, 10.4, 10.2, 6.1)  # 使用c()来创建向量，并且将体重赋值进去
```

接着我们来对体重进行求平均值等操作：

```r
> mean(weight)
[1] 7.06
```

以及：

```r
> sd(weight)
[1] 2.077498
```

由此我们可以知道体重的平均值是7.06，而标准差（standard deviation，sd）则是2.077498。

我们可以使用round()函数来保留两位小数：

```r
> round(sd(weight), 2)
[1] 2.08
```

接下来我们需要探求月龄和体重之间的相关性（correlation，cor）：

```r
> cor(age, weight)
[1] 0.9075655
```

从结果来看，我们可以发现age和weight之间的相关性为0.9075655，这是一个非常高的相关性，从统计学的角度来讲，age和weight是的相关性是显著的。

接着我们来使用plot()函数进行绘图：

```r
> plot(age, weight)
```

这是绘制的结果：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled%202.png)

上面的散点图提供了充足的信息，但是我们可以考虑一些更加美观的绘图方法。

R语言提供了一些可以用来帮助的函数：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled%203.png)

工作空间（workspace）是当前R的工作环境，它存储着所有用户定义的对象（向量，矩阵，函数，数据框和列表等）。

我们可以使用getwd()来查看当前的工作空间所在的目录：

```r
getwd()
```

得到的结果为：

```r
> getwd()
[1] "C:/Users/Wangjun Shen/Documents"
```

接着我们可以使用setwd()函数来设置工作空间：

```r
> setwd("C:\\Users\\Wangjun Shen\\Desktop\\R")
```

然后我们使用getwd再次查看一下：

```r
getwd()
```

得到的结果为：

```r
> getwd()
[1] "C:/Users/Wangjun Shen/Desktop/R"
```

这么做的一个好处是你可以使用相对路径来导入数据集，而不是使用数据集的绝对路径。

更多的管理工作空间的函数如下所示：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled%204.png)

输入和输出的函数可以参考下表：

![Untitled](chapter_01%EF%BC%9AR%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D%2065a96ce3c1d347609c3ab98567826e3f/Untitled%205.png)

R语言中常见的错误如下所示：

1. 大小写错误：如help()和Help()混淆
2. 忘记使用引号
3. 在函数调用时忘记使用括号
4. 在Windows上，路径使用的是\而不是/或者\\。这是因为R将\是做事一个转义字符。
5. 使用了一个尚未载入包中的函数。